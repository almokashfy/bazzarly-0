{"ast":null,"code":"import axios from'axios';import config from'../config/config';// Create axios instance with default config\nconst api=axios.create({baseURL:config.API_URL,timeout:10000,headers:{'Content-Type':'application/json'}});// Request interceptor\napi.interceptors.request.use(config=>{// Add auth token if available\nconst token=localStorage.getItem('authToken');if(token){config.headers.Authorization=`Bearer ${token}`;}// Add request timestamp for debugging\nconfig.metadata={startTime:new Date()};return config;},error=>{return Promise.reject(error);});// Response interceptor\napi.interceptors.response.use(response=>{// Log response time in development\nif(config.ENVIRONMENT==='development'){const endTime=new Date();const duration=endTime-response.config.metadata.startTime;// API timing logs removed for production\n}return response.data;},error=>{var _error$response,_error$response$data,_error$response2,_error$response3;// Handle common errors\nconst errorMessage=((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||error.message||'An unexpected error occurred';const statusCode=(_error$response2=error.response)===null||_error$response2===void 0?void 0:_error$response2.status;// Log errors in development\nif(config.ENVIRONMENT==='development'){// API error logs removed for production\n}// Handle specific status codes\nswitch(statusCode){case 401:// Handle unauthorized access\nlocalStorage.removeItem('authToken');window.location.href='/login';break;case 403:// Handle forbidden access\nbreak;case 404:// Handle not found\nbreak;case 429:// Handle rate limiting\nbreak;case 500:// Handle server errors\nbreak;default:break;}return Promise.reject({message:errorMessage,status:statusCode,data:(_error$response3=error.response)===null||_error$response3===void 0?void 0:_error$response3.data});});// API Service Methods\nexport const apiService={// Generic methods\nget:function(url){let params=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return api.get(url,{params});},post:(url,data)=>api.post(url,data),put:(url,data)=>api.put(url,data),patch:(url,data)=>api.patch(url,data),delete:url=>api.delete(url),// Health check\nhealthCheck:()=>api.get(config.ENDPOINTS.HEALTH),// Categories\ngetCategories:()=>api.get(config.ENDPOINTS.CATEGORIES),getCategory:id=>api.get(`${config.ENDPOINTS.CATEGORIES}/${id}`),// Products\ngetProducts:function(){let params=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return api.get(config.ENDPOINTS.PRODUCTS,{params});},getProduct:id=>api.get(`${config.ENDPOINTS.PRODUCTS}/${id}`),createProduct:productData=>api.post(config.ENDPOINTS.PRODUCTS,productData),updateProduct:(id,productData)=>api.put(`${config.ENDPOINTS.PRODUCTS}/${id}`,productData),deleteProduct:id=>api.delete(`${config.ENDPOINTS.PRODUCTS}/${id}`),// Search\nsearchProducts:function(query){let params=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return api.get(config.ENDPOINTS.SEARCH,{params:{q:query,...params}});},// Ads\ngetAds:()=>api.get(config.ENDPOINTS.ADS),// Stats\ngetStats:()=>api.get(config.ENDPOINTS.STATS)};// Utility functions for handling API responses\nexport const apiUtils={// Handle loading states\nwithLoading:async(apiCall,setLoading)=>{try{setLoading(true);const result=await apiCall();return result;}catch(error){throw error;}finally{setLoading(false);}},// Retry failed requests\nretry:async function(apiCall){let maxRetries=arguments.length>1&&arguments[1]!==undefined?arguments[1]:3;let delay=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1000;let lastError;for(let i=0;i<=maxRetries;i++){try{return await apiCall();}catch(error){lastError=error;if(i<maxRetries){await new Promise(resolve=>setTimeout(resolve,delay*Math.pow(2,i)));}}}throw lastError;},// Debounced API calls\ndebounce:function(func){let delay=arguments.length>1&&arguments[1]!==undefined?arguments[1]:config.UI.DEBOUNCE_DELAY;let timeoutId;return function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}clearTimeout(timeoutId);return new Promise((resolve,reject)=>{timeoutId=setTimeout(async()=>{try{const result=await func(...args);resolve(result);}catch(error){reject(error);}},delay);});};}};export default api;","map":{"version":3,"names":["axios","config","api","create","baseURL","API_URL","timeout","headers","interceptors","request","use","token","localStorage","getItem","Authorization","metadata","startTime","Date","error","Promise","reject","response","ENVIRONMENT","endTime","duration","data","_error$response","_error$response$data","_error$response2","_error$response3","errorMessage","message","statusCode","status","removeItem","window","location","href","apiService","get","url","params","arguments","length","undefined","post","put","patch","delete","healthCheck","ENDPOINTS","HEALTH","getCategories","CATEGORIES","getCategory","id","getProducts","PRODUCTS","getProduct","createProduct","productData","updateProduct","deleteProduct","searchProducts","query","SEARCH","q","getAds","ADS","getStats","STATS","apiUtils","withLoading","apiCall","setLoading","result","retry","maxRetries","delay","lastError","i","resolve","setTimeout","Math","pow","debounce","func","UI","DEBOUNCE_DELAY","timeoutId","_len","args","Array","_key","clearTimeout"],"sources":["C:/Users/hossa/Documents/app/Store/bazzarly 0/frontend/src/services/api.js"],"sourcesContent":["import axios from 'axios';\r\nimport config from '../config/config';\r\n\r\n// Create axios instance with default config\r\nconst api = axios.create({\r\n  baseURL: config.API_URL,\r\n  timeout: 10000,\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n  },\r\n});\r\n\r\n// Request interceptor\r\napi.interceptors.request.use(\r\n  (config) => {\r\n    // Add auth token if available\r\n    const token = localStorage.getItem('authToken');\r\n    if (token) {\r\n      config.headers.Authorization = `Bearer ${token}`;\r\n    }\r\n    \r\n    // Add request timestamp for debugging\r\n    config.metadata = { startTime: new Date() };\r\n    \r\n    return config;\r\n  },\r\n  (error) => {\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n// Response interceptor\r\napi.interceptors.response.use(\r\n  (response) => {\r\n    // Log response time in development\r\n    if (config.ENVIRONMENT === 'development') {\r\n      const endTime = new Date();\r\n      const duration = endTime - response.config.metadata.startTime;\r\n      // API timing logs removed for production\r\n    }\r\n    \r\n    return response.data;\r\n  },\r\n  (error) => {\r\n    // Handle common errors\r\n    const errorMessage = error.response?.data?.message || error.message || 'An unexpected error occurred';\r\n    const statusCode = error.response?.status;\r\n    \r\n    // Log errors in development\r\n    if (config.ENVIRONMENT === 'development') {\r\n      // API error logs removed for production\r\n    }\r\n    \r\n    // Handle specific status codes\r\n    switch (statusCode) {\r\n      case 401:\r\n        // Handle unauthorized access\r\n        localStorage.removeItem('authToken');\r\n        window.location.href = '/login';\r\n        break;\r\n      case 403:\r\n        // Handle forbidden access\r\n        break;\r\n      case 404:\r\n        // Handle not found\r\n        break;\r\n      case 429:\r\n        // Handle rate limiting\r\n        break;\r\n      case 500:\r\n        // Handle server errors\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    \r\n    return Promise.reject({\r\n      message: errorMessage,\r\n      status: statusCode,\r\n      data: error.response?.data,\r\n    });\r\n  }\r\n);\r\n\r\n// API Service Methods\r\nexport const apiService = {\r\n  // Generic methods\r\n  get: (url, params = {}) => api.get(url, { params }),\r\n  post: (url, data) => api.post(url, data),\r\n  put: (url, data) => api.put(url, data),\r\n  patch: (url, data) => api.patch(url, data),\r\n  delete: (url) => api.delete(url),\r\n  \r\n  // Health check\r\n  healthCheck: () => api.get(config.ENDPOINTS.HEALTH),\r\n  \r\n  // Categories\r\n  getCategories: () => api.get(config.ENDPOINTS.CATEGORIES),\r\n  getCategory: (id) => api.get(`${config.ENDPOINTS.CATEGORIES}/${id}`),\r\n  \r\n  // Products\r\n  getProducts: (params = {}) => api.get(config.ENDPOINTS.PRODUCTS, { params }),\r\n  getProduct: (id) => api.get(`${config.ENDPOINTS.PRODUCTS}/${id}`),\r\n  createProduct: (productData) => api.post(config.ENDPOINTS.PRODUCTS, productData),\r\n  updateProduct: (id, productData) => api.put(`${config.ENDPOINTS.PRODUCTS}/${id}`, productData),\r\n  deleteProduct: (id) => api.delete(`${config.ENDPOINTS.PRODUCTS}/${id}`),\r\n  \r\n  // Search\r\n  searchProducts: (query, params = {}) => \r\n    api.get(config.ENDPOINTS.SEARCH, { params: { q: query, ...params } }),\r\n  \r\n  // Ads\r\n  getAds: () => api.get(config.ENDPOINTS.ADS),\r\n  \r\n  // Stats\r\n  getStats: () => api.get(config.ENDPOINTS.STATS),\r\n};\r\n\r\n// Utility functions for handling API responses\r\nexport const apiUtils = {\r\n  // Handle loading states\r\n  withLoading: async (apiCall, setLoading) => {\r\n    try {\r\n      setLoading(true);\r\n      const result = await apiCall();\r\n      return result;\r\n    } catch (error) {\r\n      throw error;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  },\r\n  \r\n  // Retry failed requests\r\n  retry: async (apiCall, maxRetries = 3, delay = 1000) => {\r\n    let lastError;\r\n    \r\n    for (let i = 0; i <= maxRetries; i++) {\r\n      try {\r\n        return await apiCall();\r\n      } catch (error) {\r\n        lastError = error;\r\n        \r\n        if (i < maxRetries) {\r\n          await new Promise(resolve => setTimeout(resolve, delay * Math.pow(2, i)));\r\n        }\r\n      }\r\n    }\r\n    \r\n    throw lastError;\r\n  },\r\n  \r\n  // Debounced API calls\r\n  debounce: (func, delay = config.UI.DEBOUNCE_DELAY) => {\r\n    let timeoutId;\r\n    return (...args) => {\r\n      clearTimeout(timeoutId);\r\n      return new Promise((resolve, reject) => {\r\n        timeoutId = setTimeout(async () => {\r\n          try {\r\n            const result = await func(...args);\r\n            resolve(result);\r\n          } catch (error) {\r\n            reject(error);\r\n          }\r\n        }, delay);\r\n      });\r\n    };\r\n  },\r\n};\r\n\r\nexport default api; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}