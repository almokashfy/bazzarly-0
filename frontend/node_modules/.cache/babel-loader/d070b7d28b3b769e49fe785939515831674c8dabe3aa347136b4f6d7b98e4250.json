{"ast":null,"code":"import axios from 'axios';\nimport config from '../config/config';\n\n// Create axios instance with default config\nconst api = axios.create({\n  baseURL: config.API_URL,\n  timeout: 10000,\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\n\n// Request interceptor\napi.interceptors.request.use(config => {\n  // Add auth token if available\n  const token = localStorage.getItem('authToken');\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n\n  // Add request timestamp for debugging\n  config.metadata = {\n    startTime: new Date()\n  };\n  return config;\n}, error => {\n  return Promise.reject(error);\n});\n\n// Response interceptor\napi.interceptors.response.use(response => {\n  // Log response time in development\n  if (config.ENVIRONMENT === 'development') {\n    const endTime = new Date();\n    const duration = endTime - response.config.metadata.startTime;\n    // API timing logs removed for production\n  }\n  return response.data;\n}, error => {\n  var _error$response, _error$response$data, _error$response2, _error$response3;\n  // Handle common errors\n  const errorMessage = ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || error.message || 'An unexpected error occurred';\n  const statusCode = (_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.status;\n\n  // Log errors in development\n  if (config.ENVIRONMENT === 'development') {\n    var _error$config, _error$config2;\n    console.error('API Error:', {\n      url: (_error$config = error.config) === null || _error$config === void 0 ? void 0 : _error$config.url,\n      method: (_error$config2 = error.config) === null || _error$config2 === void 0 ? void 0 : _error$config2.method,\n      status: statusCode,\n      message: errorMessage\n    });\n  }\n\n  // Handle specific status codes\n  switch (statusCode) {\n    case 401:\n      // Handle unauthorized access\n      localStorage.removeItem('authToken');\n      window.location.href = '/login';\n      break;\n    case 403:\n      // Handle forbidden access\n      break;\n    case 404:\n      // Handle not found\n      break;\n    case 429:\n      // Handle rate limiting\n      break;\n    case 500:\n      // Handle server errors\n      break;\n    default:\n      break;\n  }\n  return Promise.reject({\n    message: errorMessage,\n    status: statusCode,\n    data: (_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : _error$response3.data\n  });\n});\n\n// API Service Methods\nexport const apiService = {\n  // Generic methods\n  get: (url, params = {}) => api.get(url, {\n    params\n  }),\n  post: (url, data) => api.post(url, data),\n  put: (url, data) => api.put(url, data),\n  patch: (url, data) => api.patch(url, data),\n  delete: url => api.delete(url),\n  // Health check\n  healthCheck: () => api.get(config.ENDPOINTS.HEALTH),\n  // Categories\n  getCategories: () => api.get(config.ENDPOINTS.CATEGORIES),\n  getCategory: id => api.get(`${config.ENDPOINTS.CATEGORIES}/${id}`),\n  // Products\n  getProducts: (params = {}) => api.get(config.ENDPOINTS.PRODUCTS, {\n    params\n  }),\n  getProduct: id => api.get(`${config.ENDPOINTS.PRODUCTS}/${id}`),\n  createProduct: productData => api.post(config.ENDPOINTS.PRODUCTS, productData),\n  updateProduct: (id, productData) => api.put(`${config.ENDPOINTS.PRODUCTS}/${id}`, productData),\n  deleteProduct: id => api.delete(`${config.ENDPOINTS.PRODUCTS}/${id}`),\n  // Search\n  searchProducts: (query, params = {}) => api.get(config.ENDPOINTS.SEARCH, {\n    params: {\n      q: query,\n      ...params\n    }\n  }),\n  // Ads\n  getAds: () => api.get(config.ENDPOINTS.ADS),\n  // Stats\n  getStats: () => api.get(config.ENDPOINTS.STATS)\n};\n\n// Utility functions for handling API responses\nexport const apiUtils = {\n  // Handle loading states\n  withLoading: async (apiCall, setLoading) => {\n    try {\n      setLoading(true);\n      const result = await apiCall();\n      return result;\n    } catch (error) {\n      throw error;\n    } finally {\n      setLoading(false);\n    }\n  },\n  // Retry failed requests\n  retry: async (apiCall, maxRetries = 3, delay = 1000) => {\n    let lastError;\n    for (let i = 0; i <= maxRetries; i++) {\n      try {\n        return await apiCall();\n      } catch (error) {\n        lastError = error;\n        if (i < maxRetries) {\n          await new Promise(resolve => setTimeout(resolve, delay * Math.pow(2, i)));\n        }\n      }\n    }\n    throw lastError;\n  },\n  // Debounced API calls\n  debounce: (func, delay = config.UI.DEBOUNCE_DELAY) => {\n    let timeoutId;\n    return (...args) => {\n      clearTimeout(timeoutId);\n      return new Promise((resolve, reject) => {\n        timeoutId = setTimeout(async () => {\n          try {\n            const result = await func(...args);\n            resolve(result);\n          } catch (error) {\n            reject(error);\n          }\n        }, delay);\n      });\n    };\n  }\n};\nexport default api;","map":{"version":3,"names":["axios","config","api","create","baseURL","API_URL","timeout","headers","interceptors","request","use","token","localStorage","getItem","Authorization","metadata","startTime","Date","error","Promise","reject","response","ENVIRONMENT","endTime","duration","data","_error$response","_error$response$data","_error$response2","_error$response3","errorMessage","message","statusCode","status","_error$config","_error$config2","console","url","method","removeItem","window","location","href","apiService","get","params","post","put","patch","delete","healthCheck","ENDPOINTS","HEALTH","getCategories","CATEGORIES","getCategory","id","getProducts","PRODUCTS","getProduct","createProduct","productData","updateProduct","deleteProduct","searchProducts","query","SEARCH","q","getAds","ADS","getStats","STATS","apiUtils","withLoading","apiCall","setLoading","result","retry","maxRetries","delay","lastError","i","resolve","setTimeout","Math","pow","debounce","func","UI","DEBOUNCE_DELAY","timeoutId","args","clearTimeout"],"sources":["C:/Users/hossa/Documents/app/Store/bazzarly 0/frontend/src/services/api.js"],"sourcesContent":["import axios from 'axios';\r\nimport config from '../config/config';\r\n\r\n// Create axios instance with default config\r\nconst api = axios.create({\r\n  baseURL: config.API_URL,\r\n  timeout: 10000,\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n  },\r\n});\r\n\r\n// Request interceptor\r\napi.interceptors.request.use(\r\n  (config) => {\r\n    // Add auth token if available\r\n    const token = localStorage.getItem('authToken');\r\n    if (token) {\r\n      config.headers.Authorization = `Bearer ${token}`;\r\n    }\r\n    \r\n    // Add request timestamp for debugging\r\n    config.metadata = { startTime: new Date() };\r\n    \r\n    return config;\r\n  },\r\n  (error) => {\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n// Response interceptor\r\napi.interceptors.response.use(\r\n  (response) => {\r\n    // Log response time in development\r\n    if (config.ENVIRONMENT === 'development') {\r\n      const endTime = new Date();\r\n      const duration = endTime - response.config.metadata.startTime;\r\n      // API timing logs removed for production\r\n    }\r\n    \r\n    return response.data;\r\n  },\r\n  (error) => {\r\n    // Handle common errors\r\n    const errorMessage = error.response?.data?.message || error.message || 'An unexpected error occurred';\r\n    const statusCode = error.response?.status;\r\n    \r\n    // Log errors in development\r\n    if (config.ENVIRONMENT === 'development') {\r\n      console.error('API Error:', {\r\n        url: error.config?.url,\r\n        method: error.config?.method,\r\n        status: statusCode,\r\n        message: errorMessage,\r\n      });\r\n    }\r\n    \r\n    // Handle specific status codes\r\n    switch (statusCode) {\r\n      case 401:\r\n        // Handle unauthorized access\r\n        localStorage.removeItem('authToken');\r\n        window.location.href = '/login';\r\n        break;\r\n      case 403:\r\n        // Handle forbidden access\r\n        break;\r\n      case 404:\r\n        // Handle not found\r\n        break;\r\n      case 429:\r\n        // Handle rate limiting\r\n        break;\r\n      case 500:\r\n        // Handle server errors\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    \r\n    return Promise.reject({\r\n      message: errorMessage,\r\n      status: statusCode,\r\n      data: error.response?.data,\r\n    });\r\n  }\r\n);\r\n\r\n// API Service Methods\r\nexport const apiService = {\r\n  // Generic methods\r\n  get: (url, params = {}) => api.get(url, { params }),\r\n  post: (url, data) => api.post(url, data),\r\n  put: (url, data) => api.put(url, data),\r\n  patch: (url, data) => api.patch(url, data),\r\n  delete: (url) => api.delete(url),\r\n  \r\n  // Health check\r\n  healthCheck: () => api.get(config.ENDPOINTS.HEALTH),\r\n  \r\n  // Categories\r\n  getCategories: () => api.get(config.ENDPOINTS.CATEGORIES),\r\n  getCategory: (id) => api.get(`${config.ENDPOINTS.CATEGORIES}/${id}`),\r\n  \r\n  // Products\r\n  getProducts: (params = {}) => api.get(config.ENDPOINTS.PRODUCTS, { params }),\r\n  getProduct: (id) => api.get(`${config.ENDPOINTS.PRODUCTS}/${id}`),\r\n  createProduct: (productData) => api.post(config.ENDPOINTS.PRODUCTS, productData),\r\n  updateProduct: (id, productData) => api.put(`${config.ENDPOINTS.PRODUCTS}/${id}`, productData),\r\n  deleteProduct: (id) => api.delete(`${config.ENDPOINTS.PRODUCTS}/${id}`),\r\n  \r\n  // Search\r\n  searchProducts: (query, params = {}) => \r\n    api.get(config.ENDPOINTS.SEARCH, { params: { q: query, ...params } }),\r\n  \r\n  // Ads\r\n  getAds: () => api.get(config.ENDPOINTS.ADS),\r\n  \r\n  // Stats\r\n  getStats: () => api.get(config.ENDPOINTS.STATS),\r\n};\r\n\r\n// Utility functions for handling API responses\r\nexport const apiUtils = {\r\n  // Handle loading states\r\n  withLoading: async (apiCall, setLoading) => {\r\n    try {\r\n      setLoading(true);\r\n      const result = await apiCall();\r\n      return result;\r\n    } catch (error) {\r\n      throw error;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  },\r\n  \r\n  // Retry failed requests\r\n  retry: async (apiCall, maxRetries = 3, delay = 1000) => {\r\n    let lastError;\r\n    \r\n    for (let i = 0; i <= maxRetries; i++) {\r\n      try {\r\n        return await apiCall();\r\n      } catch (error) {\r\n        lastError = error;\r\n        \r\n        if (i < maxRetries) {\r\n          await new Promise(resolve => setTimeout(resolve, delay * Math.pow(2, i)));\r\n        }\r\n      }\r\n    }\r\n    \r\n    throw lastError;\r\n  },\r\n  \r\n  // Debounced API calls\r\n  debounce: (func, delay = config.UI.DEBOUNCE_DELAY) => {\r\n    let timeoutId;\r\n    return (...args) => {\r\n      clearTimeout(timeoutId);\r\n      return new Promise((resolve, reject) => {\r\n        timeoutId = setTimeout(async () => {\r\n          try {\r\n            const result = await func(...args);\r\n            resolve(result);\r\n          } catch (error) {\r\n            reject(error);\r\n          }\r\n        }, delay);\r\n      });\r\n    };\r\n  },\r\n};\r\n\r\nexport default api; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}